!function(a,b){function c(){var b=f.getBoundingClientRect().width;b/i>640&&(b=640*i);var c=b/10;f.style.fontSize=c+"px",j.rem=a.rem=c}var d,e=a.document,f=e.documentElement,g=e.querySelector('meta[name="viewport"]'),h=e.querySelector('meta[name="flexible"]'),i=a.devicePixelRatio||1,j=b.flexible||(b.flexible={});if(g){console.warn("将根据已有的meta标签来设置缩放比例");var k=g.getAttribute("content").match(/initial\-scale=([\d\.]+)/);k&&(v=parseFloat(k[1]),i=parseInt(1/v))}else if(h){var l=h.getAttribute("content");if(l){var m=l.match(/initial\-dpr=([\d\.]+)/),n=l.match(/maximum\-dpr=([\d\.]+)/);m&&(i=parseFloat(m[1]),v=parseFloat((1/i).toFixed(2))),n&&(i=parseFloat(n[1]),v=parseFloat((1/i).toFixed(2)))}}var o=a.navigator.userAgent,p=o.match(/Android[\S\s]+AppleWebkit\/(\d{3})/i),q=a.chrome,r=a.navigator.appVersion.match(/(iphone|ipad|ipod)/gi),s=/TBS\/\d+/.test(a.navigator.userAgent),t=o.match(/U3\/((\d+|\.){5,})/i),u=t&&parseInt(t[1].split(".").join(""),10)>=80;r||p&&p[1]>534||q||u||s||(i=1);var v=1/i;if(f.setAttribute("data-dpr",i),!g)if(g=e.createElement("meta"),g.setAttribute("name","viewport"),g.setAttribute("content","width=device-width,initial-scale="+v+",maximum-scale="+v+",minimum-scale="+v+",user-scalable=no"),f.firstElementChild)f.firstElementChild.appendChild(g);else{var w=e.createElement("div");w.appendChild(g),e.write(w.innerHTML)}a.addEventListener("resize",function(){clearTimeout(d),d=setTimeout(c,300)},!1),a.addEventListener("pageshow",function(a){a.persisted&&(clearTimeout(d),d=setTimeout(c,300))},!1),"complete"===e.readyState?e.body.style.fontSize=12*i+"px":e.addEventListener("DOMContentLoaded",function(a){e.body.style.fontSize=12*i+"px"},!1),c(),j.dpr=a.dpr=i,j.refreshRem=c,j.rem2px=function(a){var b=parseFloat(a)*this.rem;return"string"==typeof a&&a.match(/rem$/)&&(b+="px"),b},j.px2rem=function(a){var b=parseFloat(a)/this.rem;return"string"==typeof a&&a.match(/px$/)&&(b+="rem"),b}}(window,window.lib||(window.lib={}));